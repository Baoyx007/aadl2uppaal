data kkk
properties
Source_Data_Size=> 4kb;
end kkk;

data implementation kkk.basic
end kkk.basic;


system Controller
features
input: in data port kkk;
output: out data port kkk;

flows
fp: flow path input ->output;
end Controller;

process Encryption
features
input: in data port kkk;
output: out data port kkk ;
flows
fp: flow path input->output;
end Encryption;

process implementation Encryption.basic
end Encryption.basic;

device Sensor
features
sensedData:out data port kkk;
failure:out event port;
flows
fp: flow source sensedData;
end Sensor;

device implementation Sensor.basic
annex Error_Model{**
MODEL => ErrorModels::Basic.imple;
**};
end Sensor.basic;

device Monitor
features
dataToView:in data port kkk;
flows
fp: flow sink dataToView;


end Monitor;

device implementation Monitor.basic
end Monitor.basic;


system implementation Controller.basic
subcomponents
aProcess: process Encryption.basic;
connections
c1: data port input->aProcess.input;
c2: data port aProcess.output-> output;
flows
fp: flow path input -> c1 -> aProcess.fp -> c2 -> output;
properties
Latency => 4 ms applies to c1;
Latency => 2 ms applies to c2;
end Controller.basic;

system wholeSys
end wholeSys;

system implementation wholeSys.imple
subcomponents
aSensor: device Sensor.basic;
aMonitor: device Monitor.basic;
aController: system Controller.basic;


connections
c1: data port aSensor.sensedData -> aController.input;
c2: data port aController.output -> aMonitor.dataToView;

flows
fp: end to end flow aSensor.fp -> c1 -> aController.fp-> c2
 -> aMonitor.fp;
modes
initMode: initial mode;
mMode: mode;
initMode -[aSensor.failure]->mMode;
end wholeSys.imple;
