<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_2.dtd'>
<nta>
<declaration>clock c;broadcast chan none_conn_position;broadcast chan none_conn_velocity;broadcast chan none_conn_acc;broadcast chan none_conn_req;broadcast chan none_conn_ma;broadcast chan none_conn_ea;const int PERIOD=2;
const int MAsize=3;
const int SR=3;
const int b=1;
const int start=0;
const int SB_Rate=-8;
const int EB_Rate=-10;
const double PI = 3.1415926;

double normal_random()
{
double u = random(1);
double v = random(1);
double x = sqrt((-2) * ln(u)) * cos(2 * PI * v);
if(x&lt;0){return x*-1;}else{ return x;}}
double Normal(double mu, double sigma){
    double u = random(1);
    double v = random(1);
    double x = sqrt((-2) * ln(u)) * cos(2 * PI * v);
    double ret =  x*sigma + mu;
    if(ret&lt;0)
        return ret*-1;
else
    return ret;
}

double a_strategy(){
    return  1.0;
}</declaration>

<template>
<name>Train</name>
<declaration>
clock Train_clock;

</declaration>
<location id="id1">
<name>Train_ts</name>
<label kind="invariant"> </label>
</location>

<location id="id2">
<name>pController_ps</name>
<label kind="invariant"> </label>
</location>

<location id="id3">
<name>Train_tv</name>
<label kind="invariant"> </label>
</location>

<location id="id4">
<name>pController_pv</name>
<label kind="invariant"> </label>
</location>

<location id="id5">
<name>pController_pa</name>
<label kind="invariant"> </label>
</location>

<location id="id6">
<name>Train_ta</name>
<label kind="invariant"> </label>
</location>

<init ref="id6"/>

<!-- none_conn_position -->
<transition>
<source ref="id1"/>
<target ref="id2"/>
<label kind="synchronisation">none_conn_position!</label>
<label kind="assignment"> </label>
</transition>

<!-- none_conn_velocity -->
<transition>
<source ref="id6"/>
<target ref="id1"/>
<label kind="synchronisation">none_conn_velocity!</label>
<label kind="assignment"> </label>
</transition>

<!-- none_conn_acc -->
<transition>
<source ref="id2"/>
<target ref="id6"/>
<label kind="synchronisation">none_conn_acc?</label>
<label kind="assignment"> </label>
</transition>

</template>


<template>
<name>RBC</name>
<declaration>
clock RBC_clock;

</declaration>
<location id="id1">
<name>pController_pr</name>
<label kind="invariant"> </label>
</location>

<location id="id2">
<name>RBC_r</name>
<label kind="invariant"> </label>
</location>

<location id="id3">
<name>RBC_m</name>
<label kind="invariant"> </label>
</location>

<location id="id4">
<name>pController_pm</name>
<label kind="invariant"> </label>
</location>

<location id="id5">
<name>RBC_ea</name>
<label kind="invariant"> </label>
</location>

<location id="id6">
<name>pController_pea</name>
<label kind="invariant"> </label>
</location>

<init ref="id4"/>

<!-- none_conn_req -->
<transition>
<source ref="id4"/>
<target ref="id5"/>
<label kind="synchronisation">none_conn_req?</label>
<label kind="assignment"> </label>
</transition>

<!-- none_conn_ma -->
<transition>
<source ref="id6"/>
<target ref="id4"/>
<label kind="synchronisation">none_conn_ma!</label>
<label kind="assignment"> </label>
</transition>

<!-- none_conn_ea -->
<transition>
<source ref="id5"/>
<target ref="id6"/>
<label kind="synchronisation">none_conn_ea!</label>
<label kind="assignment"> </label>
</transition>

</template>


<template>
<name>pController</name>
<declaration>
clock pController_clock;

</declaration>
<location id="id1">
<name>pController_READY</name>
<label kind="invariant"> </label>
</location>

<location id="id2">
<name>pController_GMA</name>
<label kind="invariant"> </label>
<committed/>
</location>

<location id="id3">
<name>pController_CMA</name>
<label kind="invariant"> </label>
</location>

<location id="id4">
<name>pController_RETRY</name>
<label kind="invariant"> </label>
</location>

<location id="id5">
<name>pController_MFR</name>
<label kind="invariant"> </label>
<committed/>
</location>

<location id="id6">
<name>pController_CMF</name>
<label kind="invariant"> </label>
</location>

<location id="id7">
<name>pController_SBI</name>
<label kind="invariant"> </label>
<committed/>
</location>

<location id="id8">
<name>pController_CSB</name>
<label kind="invariant"> </label>
</location>

<location id="id9">
<name>pController_EBI</name>
<label kind="invariant"> </label>
<committed/>
</location>

<location id="id10">
<name>pController_STOP</name>
<label kind="invariant"> </label>
</location>

<init ref="id1"/>

<!-- T0_go -->
<transition>
<source ref="id1"/>
<target ref="id2"/>
<label kind="assignment"> </label>
</transition>

<!-- T1_MA_Check -->
<transition>
<source ref="id2"/>
<target ref="id3"/>
<label kind="assignment"> </label>
</transition>

<!-- T2_MA_Ok -->
<transition>
<source ref="id3"/>
<target ref="id5"/>
<label kind="assignment"> </label>
</transition>

<!-- T3_Move_Check -->
<transition>
<source ref="id5"/>
<target ref="id6"/>
<label kind="assignment"> </label>
</transition>

<!-- T4_SBI_Point -->
<transition>
<source ref="id6"/>
<target ref="id7"/>
<label kind="assignment"> </label>
</transition>

<!-- T5_Move_Ok -->
<transition>
<source ref="id6"/>
<target ref="id5"/>
<label kind="assignment"> </label>
</transition>

<!-- T6_SBI_Check -->
<transition>
<source ref="id7"/>
<target ref="id8"/>
<label kind="assignment"> </label>
</transition>

<!-- T7_SBI_Out -->
<transition>
<source ref="id8"/>
<target ref="id5"/>
<label kind="assignment"> </label>
</transition>

<!-- T8_SBI_Ok -->
<transition>
<source ref="id8"/>
<target ref="id7"/>
<label kind="assignment"> </label>
</transition>

<!-- T9_MA_NotOk -->
<transition>
<source ref="id3"/>
<target ref="id4"/>
<label kind="assignment"> </label>
</transition>

<!-- T10_MA_Retry -->
<transition>
<source ref="id4"/>
<target ref="id2"/>
<label kind="assignment"> </label>
</transition>

<!-- T11_EBI_Point -->
<transition>
<source ref="id6"/>
<target ref="id9"/>
<label kind="assignment"> </label>
</transition>

<!-- T12_Stop -->
<transition>
<source ref="id9"/>
<target ref="id10"/>
<label kind="assignment"> </label>
</transition>

<!-- T13_EBI_Point -->
<transition>
<source ref="id7"/>
<target ref="id9"/>
<label kind="assignment"> </label>
</transition>

</template>

<system> system Train,RBC,pController;</system>
<queries>
</queries>
</nta>
