<?xml version="1.0" encoding="UTF-8"?>
<core:AadlSpec xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:core="http:///AADL/core" xmlns:property="http:///AADL/property" name="test3">
  <dataType name="kkk">
    <properties>
      <propertyAssociation propertyDefinition="/aadlSpec[@name=AADL_Properties]/propertySet[@name=AADL_Properties]/propertyDefinition[@name=Source_Data_Size]">
        <propertyValue xsi:type="property:IntegerValue" unitLiteral="/aadlSpec[@name=AADL_Project]/propertySet[@name=AADL_Project]/propertyType[@name=Size_Units]/unitLiteral[@name=KB]"
            valueString="4" value="4" base="10"/>
      </propertyAssociation>
    </properties>
  </dataType>
  <dataImpl name="kkk.basic" compType="/aadlSpec[@name=test3]/dataType[@name=kkk]"/>
  <systemType name="Controller">
    <flowSpecs>
      <flowPathSpec name="fp" src="/aadlSpec[@name=test3]/systemType[@name=Controller]/features/dataPort[@name=input]"
          dst="/aadlSpec[@name=test3]/systemType[@name=Controller]/features/dataPort[@name=output]"/>
    </flowSpecs>
    <features>
      <dataPort name="input" dataClassifier="/aadlSpec[@name=test3]/dataType[@name=kkk]"/>
      <dataPort name="output" direction="out" dataClassifier="/aadlSpec[@name=test3]/dataType[@name=kkk]"/>
    </features>
  </systemType>
  <processType name="Encryption">
    <flowSpecs>
      <flowPathSpec name="fp" src="/aadlSpec[@name=test3]/processType[@name=Encryption]/features/dataPort[@name=input]"
          dst="/aadlSpec[@name=test3]/processType[@name=Encryption]/features/dataPort[@name=output]"/>
    </flowSpecs>
    <features>
      <dataPort name="input" dataClassifier="/aadlSpec[@name=test3]/dataType[@name=kkk]"/>
      <dataPort name="output" direction="out" dataClassifier="/aadlSpec[@name=test3]/dataType[@name=kkk]"/>
    </features>
  </processType>
  <processImpl name="Encryption.basic" compType="/aadlSpec[@name=test3]/processType[@name=Encryption]"/>
  <deviceType name="Sensor">
    <flowSpecs>
      <flowSourceSpec name="fp" dst="/aadlSpec[@name=test3]/deviceType[@name=Sensor]/features/dataPort[@name=sensedData]"/>
    </flowSpecs>
    <features>
      <dataPort name="sensedData" direction="out" dataClassifier="/aadlSpec[@name=test3]/dataType[@name=kkk]"/>
      <eventPort name="failure" direction="out"/>
    </features>
  </deviceType>
  <deviceImpl name="Sensor.basic" compType="/aadlSpec[@name=test3]/deviceType[@name=Sensor]">
    <annexSubclause xsi:type="core:DefaultAnnexSubclause" name="Error_Model" value="&#xD;&#xA;MODEL => ErrorModels::Basic.imple;&#xD;&#xA;&#xD;&#xA;  "/>
  </deviceImpl>
  <deviceType name="Monitor">
    <flowSpecs>
      <flowSinkSpec name="fp" src="/aadlSpec[@name=test3]/deviceType[@name=Monitor]/features/dataPort[@name=dataToView]"/>
    </flowSpecs>
    <features>
      <dataPort name="dataToView" dataClassifier="/aadlSpec[@name=test3]/dataType[@name=kkk]"/>
    </features>
  </deviceType>
  <deviceImpl name="Monitor.basic" compType="/aadlSpec[@name=test3]/deviceType[@name=Monitor]"/>
  <systemImpl name="Controller.basic" compType="/aadlSpec[@name=test3]/systemType[@name=Controller]">
    <properties>
      <propertyAssociation propertyDefinition="/aadlSpec[@name=AADL_Properties]/propertySet[@name=AADL_Properties]/propertyDefinition[@name=Latency]"
          appliesTo="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]/connections/dataConnection[@name=c1]">
        <propertyValue xsi:type="property:IntegerValue" unitLiteral="/aadlSpec[@name=AADL_Project]/propertySet[@name=AADL_Project]/propertyType[@name=Time_Units]/unitLiteral[@name=Ms]"
            valueString="4" value="4" base="10"/>
      </propertyAssociation>
      <propertyAssociation propertyDefinition="/aadlSpec[@name=AADL_Properties]/propertySet[@name=AADL_Properties]/propertyDefinition[@name=Latency]"
          appliesTo="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]/connections/dataConnection[@name=c2]">
        <propertyValue xsi:type="property:IntegerValue" unitLiteral="/aadlSpec[@name=AADL_Project]/propertySet[@name=AADL_Project]/propertyType[@name=Time_Units]/unitLiteral[@name=Ms]"
            valueString="2" value="2" base="10"/>
      </propertyAssociation>
    </properties>
    <connections>
      <dataConnection name="c1" srcContext="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]"
          dstContext="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]/subcomponents/processSubcomponent[@name=aProcess]"
          src="/aadlSpec[@name=test3]/systemType[@name=Controller]/features/dataPort[@name=input]"
          dst="/aadlSpec[@name=test3]/processType[@name=Encryption]/features/dataPort[@name=input]"/>
      <dataConnection name="c2" srcContext="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]/subcomponents/processSubcomponent[@name=aProcess]"
          dstContext="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]" src="/aadlSpec[@name=test3]/processType[@name=Encryption]/features/dataPort[@name=output]"
          dst="/aadlSpec[@name=test3]/systemType[@name=Controller]/features/dataPort[@name=output]"/>
    </connections>
    <flows>
      <flowPathImpl name="fp" implement="/aadlSpec[@name=test3]/systemType[@name=Controller]/flowSpecs/flowPathSpec[@name=fp]">
        <flowElement connection="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]/connections/dataConnection[@name=c1]"/>
        <flowElement flowSpec="/aadlSpec[@name=test3]/processType[@name=Encryption]/flowSpecs/flowPathSpec[@name=fp]"
            flowContext="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]/subcomponents/processSubcomponent[@name=aProcess]"/>
        <flowElement connection="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]/connections/dataConnection[@name=c2]"/>
      </flowPathImpl>
    </flows>
    <subcomponents>
      <processSubcomponent name="aProcess" classifier="/aadlSpec[@name=test3]/processImpl[@name=Encryption.basic]"/>
    </subcomponents>
  </systemImpl>
  <systemType name="wholeSys"/>
  <systemImpl name="wholeSys.imple" compType="/aadlSpec[@name=test3]/systemType[@name=wholeSys]">
    <connections>
      <dataConnection name="c1" srcContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/deviceSubcomponent[@name=aSensor]"
          dstContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/systemSubcomponent[@name=aController]"
          src="/aadlSpec[@name=test3]/deviceType[@name=Sensor]/features/dataPort[@name=sensedData]"
          dst="/aadlSpec[@name=test3]/systemType[@name=Controller]/features/dataPort[@name=input]"/>
      <dataConnection name="c2" srcContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/systemSubcomponent[@name=aController]"
          dstContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/systemSubcomponent[@name=aController2]"
          src="/aadlSpec[@name=test3]/systemType[@name=Controller]/features/dataPort[@name=output]"
          dst="/aadlSpec[@name=test3]/systemType[@name=Controller]/features/dataPort[@name=input]"/>
      <dataConnection name="c3" srcContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/systemSubcomponent[@name=aController2]"
          dstContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/deviceSubcomponent[@name=aMonitor]"
          src="/aadlSpec[@name=test3]/systemType[@name=Controller]/features/dataPort[@name=output]"
          dst="/aadlSpec[@name=test3]/deviceType[@name=Monitor]/features/dataPort[@name=dataToView]"/>
    </connections>
    <modes>
      <mode name="initMode" state="INITIAL"/>
      <mode name="mMode"/>
      <modeTransition srcMode="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/modes/mode[@name=initMode]"
          dstMode="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/modes/mode[@name=mMode]"
          triggerEventPort="/aadlSpec[@name=test3]/deviceType[@name=Sensor]/features/eventPort[@name=failure]"
          triggerEventPortContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/deviceSubcomponent[@name=aSensor]"/>
    </modes>
    <flows>
      <endToEndFlow name="fp">
        <flowElement flowSpec="/aadlSpec[@name=test3]/deviceType[@name=Sensor]/flowSpecs/flowSourceSpec[@name=fp]"
            flowContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/deviceSubcomponent[@name=aSensor]"/>
        <flowElement connection="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/connections/dataConnection[@name=c1]"/>
        <flowElement flowSpec="/aadlSpec[@name=test3]/systemType[@name=Controller]/flowSpecs/flowPathSpec[@name=fp]"
            flowContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/systemSubcomponent[@name=aController]"/>
        <flowElement connection="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/connections/dataConnection[@name=c2]"/>
        <flowElement flowSpec="/aadlSpec[@name=test3]/systemType[@name=Controller]/flowSpecs/flowPathSpec[@name=fp]"
            flowContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/systemSubcomponent[@name=aController2]"/>
        <flowElement connection="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/connections/dataConnection[@name=c3]"/>
        <flowElement flowSpec="/aadlSpec[@name=test3]/deviceType[@name=Monitor]/flowSpecs/flowSinkSpec[@name=fp]"
            flowContext="/aadlSpec[@name=test3]/systemImpl[@name=wholeSys.imple]/subcomponents/deviceSubcomponent[@name=aMonitor]"/>
      </endToEndFlow>
    </flows>
    <subcomponents>
      <deviceSubcomponent name="aSensor" classifier="/aadlSpec[@name=test3]/deviceImpl[@name=Sensor.basic]"/>
      <deviceSubcomponent name="aMonitor" classifier="/aadlSpec[@name=test3]/deviceImpl[@name=Monitor.basic]"/>
      <systemSubcomponent name="aController" classifier="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]"/>
      <systemSubcomponent name="aController2" classifier="/aadlSpec[@name=test3]/systemImpl[@name=Controller.basic]"/>
    </subcomponents>
  </systemImpl>
</core:AadlSpec>
